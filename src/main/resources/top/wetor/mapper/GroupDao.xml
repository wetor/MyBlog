<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.wetor.dao.GroupDao">
    <resultMap id="groupRM" type="top.wetor.domain.Group">
        <id property="id" column="g_id"/>
        <result property="name" column="g_name"/>
        <result property="info" column="g_info"/>
        <result property="rank" column="g_rank"/>
        <result property="count" column="g_count"/>
    </resultMap>
    <!-- TODO Group多表映射-->


    <insert id="insertGroup" parameterType="top.wetor.domain.Group">
        insert into tb_group
        values( null , #{name} , #{info}, #{rank}, 0)
    </insert>
    <delete id="deleteGroupById" parameterType="Integer">
        delete from tb_group
        Where g_id = #{id}
    </delete>
    <update id="updateGroup" parameterType="top.wetor.domain.Group">
        update tb_group
        <set>
            <if test="name!=null">g_name=#{name},</if>
            <if test="info!=null">g_info=#{info},</if>
            <if test="rank!=null">g_rank=#{rank},</if>
            <if test="count!=null">g_count=#{count},</if>
        </set>
        where g_id = #{id}
    </update>
    <select id="selectGroupById" parameterType="Integer" resultMap="groupRM">
        select * from tb_group
        where g_id = #{id}
    </select>

    <select id="selectGroupArticleCountById" parameterType="Integer" resultType="Integer">
        select g_count from tb_group
        where g_id = #{id}
    </select>

    <select id="selectGroupCount" resultType="integer">
        select count(*) from tb_group
    </select>
    <select id="selectGroupPage" resultMap="groupRM">
        select * from tb_group
        ORDER BY g_rank
        limit #{begin},#{number}
    </select>

    <select id="selectGroupAll" resultMap="groupRM">
        select * from tb_group
    </select>

</mapper>